# Fiber Network Glossary

Simple and non-technical explanations of key Fiber Network terminology.

## Asset
The value unit that Fiber moves through channels. An asset can be the native CKB token or a user-defined token (UDT) on the Nervos CKB chain. Unless a specific asset type matters, references to "assets" in this glossary mean any Fiber-supported token.

## Fiber Network (Lightning-style on CKB)
The "Asset High-Speed Highway" for the CKB ecosystem. While asset transfers usually wait for block confirmations on-chain, Fiber Network uses Lightning-style channels to move these assets through "side lanes" with near-instant speed and negligible fees. Final settlements are only reported back to the CKB mainnet when necessary.

## Node
An "Asset Transit Station." This can be your CKB wallet or a dedicated server. Nodes are the backbone of the fiber network, responsible for maintaining channels and ensuring that assets flow safely to their destinations.

## Payment Channel
A "Private Conveyor Belt" between two nodes. Both parties lock a certain amount of Cells (CKB's version of smart UTXOs) containing assets on the mainnet. Once open, you can slide balances back and forth instantly—like moving beads on an abacus—without touching the main blockchain.

## Commitment Transaction
A "Latest Settlement Agreement." Every time the balance of assets changes in the channel, both parties sign a new agreement. It’s your safety net: if your partner disappears, you can submit this latest agreement to the CKB mainnet to reclaim your Cells and assets.

## Gossip Protocol
The "Status Broadcast." Since Fiber Network is decentralized, nodes "gossip" to share info: "I have a channel open," or "I support routing this specific asset." This lets nodes build a route map. Gossip shares channel presence and fees—not real-time balances—so a path found this way can still lack capacity.

## Multi-hop Routing
The "Asset Relay Race." You don’t need a direct channel with everyone. If you want to send assets to someone you aren't connected to, the network finds a path through intermediate nodes, "hopping" the assets from channel to channel until they reach the destination.

## Onion Routing
A "Multi-Layered Privacy Wrap." When you send assets, the route is encrypted in layers. Each intermediate node only knows where to pass the "package" next, they don’t know where it started or where it’s finally going, keeping your financial activity private.

## Preimage
The "Digital Claim Ticket." This is a secret random string generated by the recipient. It acts as the only key that can unlock the payment. Whoever presents the correct Preimage according to the contract rules gets to claim the assets in the channel.

## HTLC (Hashed Timelock Contract)
A "Timed Vault with a Passcode." The sender locks assets in a box with two rules: "If you show the 'Claim Ticket' (Preimage) within a certain time, the assets are yours. If the timer runs out, the assets fly back to me." This ensures middlemen can’t run away with the money.

## PTLC (Point Timelock Contract)
The "Mathematical Upgrade" to HTLC. In a PTLC, the lock is a curve point (like a public key) rather than a hash, so the secret acts like a private key. This removes the repeated-hash linkage, improving privacy and enabling cleaner multi-path/swap designs. PTLC support is a planned direction; today Fiber still runs on hash-based TLC/HTLC flows.

## Invoice
A "Digital Bill" or QR code. When you want to receive a payment, you generate an invoice. It contains the asset type, the amount, an expiry, and a lock derived from a secret (a payment hash today, or a point in a PTLC future). The sender scans it, and Fiber Network automatically finds the best path to pay you.

## Routing Fee
The "Asset Handling Fee." Intermediate nodes lock up their own liquidity to forward your payment. The payer covers a small fee (in the asset being moved) as compensation.

## Watchtower
Your "Asset Bodyguard." Since channel asset states are stored off-chain, a dishonest partner might try to broadcast an "old agreement" to steal funds while you are offline. A Watchtower monitors the CKB chain 24/7 and automatically intercepts any cheating attempts, punishing the attacker.

## Node Identifiers: Pubkey, Node ID, and Peer ID

A Fiber node has two forms of identity. They look different, serve different purposes, and are **not interchangeable** in RPC calls.

### Pubkey (aka Node ID)

A 33-byte compressed secp256k1 public key, displayed as a 66-character hex string (e.g. `"02ab1234..."`). This is the cryptographic identity of a node. In the RPC interface it appears under several field names depending on context:

| RPC Field | Used In |
|-----------|---------|
| `node_id` | `node_info`, `graph_nodes` |
| `pubkey` | `list_peers`, `graph_nodes`, `hop_hints` |
| `target_pubkey` | `send_payment` |
| `node1` / `node2` | `graph_channels` |

All of the above are the same type (`Pubkey`) and can be used wherever a `Pubkey` is expected.

### Peer ID

A base58-encoded string (e.g. `"QmYJnK7..."`), derived by **hashing** the node's `Pubkey`. This is used by the P2P transport layer to identify network connections. The derivation is one-way: you cannot recover a `Pubkey` from a `Peer ID`.

| RPC Field | Used In |
|-----------|---------|
| `peer_id` | `open_channel`, `list_channels`, `disconnect_peer`, `list_peers` |

### Which One to Use?

- **Payment-related RPCs** (`send_payment`, `build_router`, etc.) expect a **`Pubkey`** (hex).
- **Connection/channel management RPCs** (`open_channel`, `disconnect_peer`, etc.) expect a **`Peer ID`** (base58).
- The `list_peers` RPC returns **both** `pubkey` and `peer_id` for each connected peer, making it easy to look up either value.
